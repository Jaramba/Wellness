{% extends "records/list_base.html" %}

{% block header %}
	Immunizations
{% endblock header %}

{% block action-buttons %}
	<a href="{% url immunization-create %}" class="btn btn-info pull-right">Add Immunization</a>
{% endblock action-buttons %}

{% block table-list %}
	{% if immunizations %} 
		<table class='table'>
			<tr>				
				{% if not request.session.use_page_as == 'patient' %}
					<th>Code</th>
					<th>Patient</th>
					<th>Delivery</th>
				{% endif %}
				<th>Provider</th>
				{% if not request.session.use_page_as == 'patient' %}
					<th>Brand name</th>					
				{% else %}
					<th>Name</th>
				{% endif %}
				<th>Duration</th>				
				<th>Administered</th>
				<th>Follow up</th>
				<th></th>
			</tr>
			{% for immunization in immunizations %}
				<tr>
					{% if not request.session.use_page_as == 'patient' %}
						<td>{{immunization.code}}</td>
						<td>{{immunization.user}}</td>						
						<td>{{immunization.get_mode_of_delivery_display}}</td>
					{% endif %}
					<td>{{immunization.provider}}</td>
					<td>{{immunization.brand_name}}</td>
					<td>{{immunization.duration_of_protection}} years</td>					
					<td>{{immunization.start_time|date:"SHORT_DATE_FORMAT"}}</td>
					<td>{{immunization.follow_up_date|date:"SHORT_DATE_FORMAT"}}</td>
					<td>
						<a href="{% url immunization-edit immunization.pk %}">Edit</a> |
						<a href="{% url immunization-delete immunization.pk %}">Delete</a>
					</td>
				</tr>
			{% empty %}
				<tr><td colspan="2">No Immunizations Found</td></tr>
			{% endfor %}
		</table>
	{% else %}
		<div>
			No Immunizations Found
		<div>
	{% endif %}
{% endblock table-list %}