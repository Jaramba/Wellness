{% extends "records/records_base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block page-title %}
	Immunization Create
{% endblock page-title %}

{% block extracss-links %}
	{{ block.super }}
	<link rel="stylesheet" href="{{ STATIC_URL }}css/forms.css" type="text/css" />
{% endblock extracss-links %}

{% block extrajs-jquery-plugins %}
	{{block.super}}
	<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.tinymce.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}js/tiny_mce_gzip.js"></script>
{% endblock extrajs-jquery-plugins %}

{% block extracss-inline %}
	table.mceLayout{
		width: 500px;
	}
{% endblock extracss-inline %}

{% block extrajs-global %}
	tinyMCE_GZ.init({'plugins':'','themes':'simple','languages':'en','disk_cache':true,'debug':false});
	tinyMCE_GZ.init({'plugins':'','themes':'simple','languages':'en','disk_cache':true,'debug':false});
	
	function initAllRichTextAreas() {
		var view = this;
		window.setTimeout(function () {
			$('textarea.rich').each(function () {
				view.initRichTextarea($(this));
				var wrapper = $(this).parent();
				if (wrapper.not(':visible')) wrapper.fadeIn('fast');
			});
		}, 500);
	};
	function initRichTextarea(textarea) {
		var targetTD = textarea.next().find('.mceIframeContainer');
		var tinymce = textarea.next().find('iframe').contents().find('#tinymce');
		tinymce.unbind('focus').bind('focus', function () {
			targetTD.css({'background-color': '#fffff9'});
		});
		tinymce.unbind('blur').bind('blur', function () {
			targetTD.css({'background-color': '#ffffff'});
		});
	};
{% endblock extrajs-global %}

{% block extrajs-jquery-enclosed %}
	initAllRichTextAreas();
	$("#id_notes").tinymce({'mode':'exact','elements':'id_notes','language':'en','readonly':false,'relative_urls':false,'remove_script_host':false,'convert_fonts_to_spans':true,'fullscreen_new_window':true,'media_use_script':true,'theme':'advanced','height':'200','skin':'uhai','theme_advanced_toolbar_location':'top','theme_advanced_buttons1':'bold,italic,underline,bullist,numlist,link,unlink','theme_advanced_buttons2':'','theme_advanced_buttons3':'','theme_advanced_toolbar_align':'left','plugins':'paste,inlinepopups'}, 'html', true);
{% endblock extrajs-jquery-enclosed %}

{% block container-right %}
	{% crispy form form.helper %}
{% endblock container-right %}
