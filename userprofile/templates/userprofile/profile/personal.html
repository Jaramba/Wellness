{% extends base_template %}
{% load i18n %}
{% load uni_form_tags %}
{% load thumbnail %}

{% block title %}
	{% trans "Inposting | Personal Profile" %}
{% endblock %}

{% block extracss %}
	<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/forms.css">
	<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/enhanced.css">
	<l<li>
				<a href="{% url units %}">Units {%if selected == 'units'%}<span style="float: right; margin-right: 10px;">&gt;</span>{% endif %}</a>
			</liink rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/jquery.tagit.css">
	<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/tagit.ui-zendesk.css">
	<style type="text/css" media="screen">
		.qq-upload-list{
			list-style: none;
		}
		.qq-upload-list li span{
			margin-right: 10px;
		}
	</style>
{% endblock extracss %}

{% block extrajs %}
	<script type="text/javascript">
		$(function() {
			$(":text, textarea").addClass("text");
		});
	</script>
	<script src="{{STATIC_URL}}js/tag-it.js" type="text/javascript" charset="utf-8"></script>
	<script src="{{ STATIC_URL }}js/fileuploader.js" type="text/javascript"></script>
	<script type="text/javascript">
        function createUploader(){            
            var uploader = new qq.FileUploader({
                element: document.getElementById('image-upload-button'),
                action: '{% url profile-pic-uploader %}',
                debug: true,
                multiple: false,
                sizeLimit: (1024 * 1000 * 1),
		        minSizeLimit: 0,
		        // events
		        // return false to cancel submit
		        onSubmit: function(id, fileName){},
		        onProgress: function(id, fileName, loaded, total){},
		        onComplete: function(id, fileName, response){
		        	if (response.success){
		        		$('#setting-profile-pic').attr({'src':'{{MEDIA_URL}}'+response.file});
		        		$('#id_picture').val(response.file);
		        	}else if(response.error){
		        		
		        	}
		        },
		        onCancel: function(id, fileName){}
            });           
			$(".qq-upload-button").addClass("button").addClass("blue").css({'margin-left':'5px'});
        }
        window.onload = createUploader;     
		$(document).ready(function() {
			$("input.ui-widget-content").focus(function(){
				$('ul.ui-widget-content').addClass("text");
			});
			$("input.ui-widget-content").focusout(function(){
				$('ul.ui-widget-content').removeClass("text");
			});

            // singleFieldTags2 is an INPUT element, rather than a UL as in the other 
            // examples, so it automatically defaults to singleField.
		    $('#id_industries').tagit({allowSpaces: true});
		    //$('#id_picture').customFileInput();
	    });
	</script>
{% endblock extrajs %}

{% block pitch %}
	<div id="side_nav" class="left clearfix">
		<label><u>My Settings</u></label>
		<ul class="profile_nav">
			<li>
				<a href="{% url settings %}">Profile {%if selected == 'profile'%}<span style="float: right; margin-right: 10px;">&gt;</span>{% endif %}</a>
			</li> 
			<li>
				<a href="{% url settings-applicant-password %}">Password {%if selected == 'password'%}<span style="float: right; margin-right: 10px;">&gt;</span>{% endif %}</a>
			</li>
			<li>
				<a href="{% url applicant-preferences %}">Preferences {%if selected == 'preferences'%}<span style="float: right; margin-right: 10px;">&gt;</span>{% endif %}</a>
			</li>
			<li>
				<a href="{% url units %}">Units {%if selected == 'units'%}<span style="float: right; margin-right: 10px;">&gt;</span>{% endif %}</a>
			</li>
		</ul>
	</div>
	<div id="content">
		{% uni_form form form.helper %}
	</div>
{% endblock %}
